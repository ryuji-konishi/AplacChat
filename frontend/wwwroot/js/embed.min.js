var init=function(n,t){var i=n.find("#chat-input");i.keypress(function(r){var u=r.keyCode?r.keyCode:r.which,f;if(u!=8&&(!(33<=u)||!(u<=40))){f=i.val();switch(u){case 13:r.preventDefault();submitChat(n,t)}}});i.focus()},initLayout=function(n,t,i){var r=n.height(),u=t.height();i.height(r-u)},submitChat=function(n,t){var r=n.find("#chat-input"),i=r.val();(i=i.trim(),i!="")&&(appendMessage(t,i,"chat-msg-send"),r.attr("placeholder",""),showBusyImage(n),$.ajax({url:"http://localhost:5000/infer",type:"POST",dataType:"json",contentType:"text/plain",data:i,success:function(i){i!=null?(hideMessage(n),r.val(""),appendMessage(t,i,"chat-msg-receive")):showMessage(n,"<strong>Sorry!<\/strong> Internal error happened.");hideBusyImage(n)},error:function(){showMessage(n,"<strong>Sorry!<\/strong> Internal error happened.");hideBusyImage(n)}}))},appendMessage=function(n,t,i){var u=n.html(),r='<div class="'+i+'">';r+=t;r+="<\/div>";n.html(u+r)},showMessage=function(n,t){n.find("#show-message").show().html("<p><b>"+t+"<\/b><\/p>")},hideMessage=function(n){n.find("#show-message").hide()},showBusyImage=function(n){n.find("#chat-input").addClass("chat-input-busy")},hideBusyImage=function(n){n.find("#chat-input").removeClass("chat-input-busy")};