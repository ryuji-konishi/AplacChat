var init=function(){$("#formula-input").keypress(function(n){var t=n.keyCode?n.keyCode:n.which,i;if(t!=8&&(!(33<=t)||!(t<=40))){i=$("#formula-input").val();switch(t){case 13:n.preventDefault();submitFormula()}}});$("#formula-input").keyup(function(n){var t=n.keyCode?n.keyCode:n.which;(t==8||t==32)&&startFormatting()});$("#formula-input").focus()},submitFormula=function(){var n=$("#formula-input").val();(n=n.trim(),n!="")&&($("#formula-input").attr("placeholder",""),showBusyImage(),$.ajax({url:"/infer",type:"POST",dataType:"text",data:n,success:function(n){n!=null?(hideHint(),hideMessage(),$("#formula-input").val(""),populateList(n)):showMessage("<strong>Sorry!<\/strong> Internal error happened.");hideBusyImage()},error:function(){showMessage("<strong>Sorry!<\/strong> Internal error happened.");hideBusyImage()}}))},populateList=function(n){var t="";t+="<tr>";t+="<td><blockquote>"+n+"<\/blockquote><\/td>";t+="<\/tr>";$("#calc-records-tbody").html(t)},showMessage=function(n){$("#show-message").show().html("<p><b>"+n+"<\/b><\/p>")},hideMessage=function(){$("#show-message").hide()},showHint=function(n){$("#show-hint").show().html("<p>"+n+"<\/p>")},hideHint=function(){$("#show-hint").hide()},showBusyImage=function(){$("#formula-input").addClass("formula-input-busy")},hideBusyImage=function(){$("#formula-input").removeClass("formula-input-busy")};